{% extends "auctions/layout.html" %}

{% block body %}
    <h2>Categories</h2>

    <div style="position: relative;">
        <label>Choose a category to filter by: </label>
        <form action="{% url 'categories' %}" method="get">       
            <select name="filter" onchange="this.form.submit()">
                <option selected disabled>-----------</option>
                {% for category in categories %}
                <option value="{{ category.id }}">{{ category }}</option>
                {% endfor %}
            </select>
        </form>
    </div>
    <hr>
    <div>
        {% for listing in listings %}
        <a href="{% url 'listing' listing.id %}">
            <div class="listing-row">
                <div>
                    {% if listing.image %}
                        image
                    {% else %}
                        <svg width="200" height="200">       
                            <image xlink:href="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg" width="200" height="200"/>    
                        </svg>
                    {% endif %}
                </div>
                <div>
                    {{ listing.title }} <br>
                    {{ listing.description }} <br>
                    {{ listing.seller }} <br>
                    {{ listing.end_dateTime }}
                </div>
            </div>
            <br>
        </a>
        <hr>
        {% empty %}
            <p>There are no listings in this category.</p>
    
        {% endfor %}

    </div>


{% endblock %}